<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TripBuddy - Input System</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide-react@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700;800&display=swap');
        body { font-family: 'Sarabun', sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0% { transform: translateY(0px) rotate(3deg); }
            50% { transform: translateY(-10px) rotate(-1deg); }
            100% { transform: translateY(0px) rotate(3deg); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏∂‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
        const getIcon = (name) => {
            return (window.LucideReact && window.LucideReact[name]) || (window.lucide && window.lucide[name]) || (() => null);
        };

        const Calendar = getIcon('Calendar');
        const MapPin = getIcon('MapPin');
        const Users = getIcon('Users');
        const Plus = getIcon('Plus');
        const CheckCircle = getIcon('CheckCircle');
        const ChevronRight = getIcon('ChevronRight');
        const ChevronLeft = getIcon('ChevronLeft');
        const ThumbsUp = getIcon('ThumbsUp');
        const AlertCircle = getIcon('AlertCircle');
        const Clock = getIcon('Clock');
        const Home = getIcon('Home');
        const Info = getIcon('Info');
        const Check = getIcon('Check');
        const LogOut = getIcon('LogOut');
        const Sparkles = getIcon('Sparkles');
        const Palmtree = getIcon('Palmtree');
        const Sun = getIcon('Sun');

        // === ‡∏£‡∏∞‡∏ö‡∏∏ URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ===
        const HARDCODED_SHEET_URL = "https://script.google.com/macros/s/AKfycbz5nukgyV2w5goNKakjYkKrtWvk9l6MUgAg_WCJyhlKlexWgxf8ifS6YtjNXuIesm4t/exec"; 

        const App = () => {
            const [userName, setUserName] = useState('');
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [activeTab, setActiveTab] = useState('availability');
            const [isSaving, setIsSaving] = useState(false);
            const [showSuccessModal, setShowSuccessModal] = useState(false);
            
            const [data, setData] = useState({
                availabilities: [], 
                destinations: [],   
                preferences: { durationVotes: {}, accommodationVotes: {} }
            });

            const [newLocationName, setNewLocationName] = useState('');

            useEffect(() => {
                const fetchData = async () => {
                    if (!HARDCODED_SHEET_URL || HARDCODED_SHEET_URL === "") return;
                    try {
                        const res = await fetch(HARDCODED_SHEET_URL);
                        const result = await res.json();
                        if (result) {
                            setData({
                                availabilities: Array.isArray(result.availabilities) ? result.availabilities : [],
                                destinations: Array.isArray(result.destinations) ? result.destinations : [],
                                preferences: result.preferences || { durationVotes: {}, accommodationVotes: {} }
                            });
                        }
                    } catch (e) { console.error("Fetch error:", e); }
                };
                fetchData();
            }, []);

            const syncToCloud = async (newData, showModal = false) => {
                if (!HARDCODED_SHEET_URL) return;
                setIsSaving(true);
                try {
                    await fetch(HARDCODED_SHEET_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ type: 'UPDATE_ALL', data: newData })
                    });
                    if (showModal) {
                        setShowSuccessModal(true);
                        setTimeout(() => setShowSuccessModal(false), 3000);
                    }
                } catch (e) { console.error("Save error:", e); }
                finally { setIsSaving(false); }
            };

            const [viewMonth, setViewMonth] = useState(new Date(2026, 0, 1));
            const months = ["‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå", "‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°", "‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô", "‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô", "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°", "‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô", "‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°", "‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô", "‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"];
            
            const daysInMonth = useMemo(() => {
                const year = viewMonth.getFullYear();
                const month = viewMonth.getMonth();
                const date = new Date(year, month, 1);
                const days = [];
                while (date.getMonth() === month) {
                    days.push(new Date(date));
                    date.setDate(date.getDate() + 1);
                }
                return days;
            }, [viewMonth]);

            const toggleDateStatus = (dateStr) => {
                const newData = { ...data };
                let userIdx = newData.availabilities.findIndex(a => a.name === userName);
                if (userIdx === -1) {
                    newData.availabilities.push({ name: userName, available: [dateStr], busy: [] });
                } else {
                    let user = newData.availabilities[userIdx];
                    const currentAvailable = Array.isArray(user.available) ? user.available : [];
                    const currentBusy = Array.isArray(user.busy) ? user.busy : [];
                    const isAvail = currentAvailable.includes(dateStr);
                    const isBusy = currentBusy.includes(dateStr);
                    
                    if (!isAvail && !isBusy) {
                        user.available = [...currentAvailable, dateStr];
                    } else if (isAvail) {
                        user.available = currentAvailable.filter(d => d !== dateStr);
                        user.busy = [...currentBusy, dateStr];
                    } else {
                        user.busy = currentBusy.filter(d => d !== dateStr);
                    }
                }
                setData(newData);
            };

            const handleVotePreference = (category, value) => {
                const newData = { ...data };
                if (!newData.preferences) newData.preferences = { durationVotes: {}, accommodationVotes: {} };
                const field = category === 'duration' ? 'durationVotes' : 'accommodationVotes';
                if (!newData.preferences[field]) newData.preferences[field] = {};
                
                const votes = newData.preferences[field][value] || [];
                newData.preferences[field][value] = votes.includes(userName) ? votes.filter(u => u !== userName) : [...votes, userName];
                setData(newData);
            };

            if (!isLoggedIn) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-100 via-white to-indigo-100 flex items-center justify-center p-4">
                        <div className="max-w-md w-full bg-white/80 backdrop-blur-lg rounded-[3rem] shadow-2xl p-10 border border-white text-center relative overflow-hidden">
                            <div className="absolute top-0 right-0 p-4 opacity-10 rotate-12"><Sun size={120} className="text-orange-400" /></div>
                            <div className="absolute bottom-0 left-0 p-4 opacity-10 -rotate-12"><Palmtree size={120} className="text-green-400" /></div>
                            <div className="relative inline-block mb-8">
                                <div className="bg-gradient-to-tr from-blue-600 to-cyan-400 w-28 h-28 rounded-[2rem] flex items-center justify-center mx-auto shadow-2xl shadow-blue-300 animate-float">
                                    <MapPin className="text-white w-14 h-14" strokeWidth={2.5} />
                                </div>
                                <div className="absolute -top-3 -right-3 bg-yellow-400 p-2.5 rounded-full shadow-lg animate-bounce">
                                    <Sparkles className="text-white w-6 h-6" />
                                </div>
                            </div>
                            <h1 className="text-4xl font-black text-slate-800 mb-2 tracking-tight">‡πÑ‡∏õ‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞! üå¥</h1>
                            <p className="text-slate-500 mb-10 font-bold italic tracking-wide">"‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏ß‡πà‡∏≤‡∏á... ‡∏ö‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πà‡∏≠‡∏¢!"</p>
                            <div className="space-y-4 relative z-10">
                                <input type="text" className="w-full px-8 py-5 rounded-3xl border-2 border-slate-100 focus:border-blue-500 focus:ring-8 focus:ring-blue-500/5 outline-none transition-all text-center text-xl font-extrabold shadow-inner bg-slate-50/50" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" value={userName} onChange={e => setUserName(e.target.value)} onKeyDown={e => e.key === 'Enter' && userName && setIsLoggedIn(true)} />
                                <button onClick={() => userName && setIsLoggedIn(true)} className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-black py-5 rounded-3xl hover:from-blue-700 hover:to-indigo-700 shadow-2xl shadow-blue-200 transform active:scale-95 transition-all text-xl">‡∏≠‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏¢! üöÄ</button>
                            </div>
                            <p className="mt-10 text-[11px] text-slate-300 uppercase font-black tracking-[0.3em]">Group Trip Planner v2.2</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-slate-50 pb-24">
                    {showSuccessModal && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 text-center">
                            <div className="bg-white rounded-[2.5rem] p-10 max-w-xs w-full shadow-2xl animate-in fade-in zoom-in duration-300 border border-slate-100">
                                <div className="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600 shadow-inner">
                                    <CheckCircle size={56} strokeWidth={2.5}/>
                                </div>
                                <h3 className="text-2xl font-black text-slate-800 mb-2 tracking-tight">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
                                <p className="text-slate-500 text-sm mb-8 font-medium leading-relaxed">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÜ ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏ô Dashboard ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
                                <button onClick={() => setShowSuccessModal(false)} className="w-full bg-slate-100 hover:bg-slate-200 py-4 rounded-2xl font-black text-slate-700 transition-colors">‡∏ï‡∏Å‡∏•‡∏á</button>
                            </div>
                        </div>
                    )}

                    <header className="bg-white/80 backdrop-blur-md border-b p-4 sticky top-0 z-50 flex justify-between items-center shadow-sm px-6">
                        <div className="flex items-center gap-2 font-black text-blue-600 uppercase tracking-tighter text-lg">
                            <MapPin size={24} strokeWidth={3}/> Trip Buddy
                        </div>
                        <div className="flex items-center gap-3">
                            <div className="text-xs font-black bg-blue-50 px-4 py-2 rounded-full text-blue-600 border border-blue-100 shadow-sm">{userName}</div>
                            <button onClick={() => setIsLoggedIn(false)} className="text-slate-300 hover:text-red-500 transition-colors p-2"><LogOut size={20}/></button>
                        </div>
                    </header>

                    <main className="p-4 md:p-8 max-w-3xl mx-auto space-y-6">
                        <div className="flex bg-white p-2 rounded-3xl border shadow-sm gap-1">
                            <button onClick={() => setActiveTab('availability')} className={`flex-1 py-4 rounded-2xl font-black transition-all ${activeTab === 'availability' ? 'bg-blue-600 text-white shadow-xl shadow-blue-100' : 'text-slate-400 hover:bg-slate-50'}`}>1. ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏á</button>
                            <button onClick={() => setActiveTab('vote')} className={`flex-1 py-4 rounded-2xl font-black transition-all ${activeTab === 'vote' ? 'bg-blue-600 text-white shadow-xl shadow-blue-100' : 'text-slate-400 hover:bg-slate-50'}`}>2. ‡πÇ‡∏´‡∏ß‡∏ï‡∏™‡πÑ‡∏ï‡∏•‡πå/‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</button>
                        </div>

                        {activeTab === 'availability' && (
                            <div className="bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                                <div className="flex justify-between items-center">
                                    <h2 className="font-black text-2xl tracking-tight">‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ß‡∏•‡∏≤</h2>
                                    <div className="flex items-center gap-2 bg-slate-50 p-1.5 rounded-2xl border text-sm font-black">
                                        <button onClick={() => setViewMonth(new Date(viewMonth.getFullYear(), viewMonth.getMonth()-1))} className="p-2 hover:bg-white rounded-xl transition-colors shadow-sm"><ChevronLeft size={18}/></button>
                                        <span className="w-32 text-center text-slate-700">{months[viewMonth.getMonth()]} {viewMonth.getFullYear()+543}</span>
                                        <button onClick={() => setViewMonth(new Date(viewMonth.getFullYear(), viewMonth.getMonth()+1))} className="p-2 hover:bg-white rounded-xl transition-colors shadow-sm"><ChevronRight size={18}/></button>
                                    </div>
                                </div>
                                <div className="bg-blue-50 p-5 rounded-3xl flex gap-4 text-sm text-blue-800 border border-blue-100 shadow-inner">
                                    <Info size={24} className="shrink-0 text-blue-600"/>
                                    <div className="font-medium">
                                        ‡∏Ñ‡∏•‡∏¥‡∏Å 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á = <strong className="text-blue-600">‡∏ß‡πà‡∏≤‡∏á (‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)</strong><br/>
                                        ‡∏Ñ‡∏•‡∏¥‡∏Å 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á = <strong className="text-red-500">‡∏ï‡∏¥‡∏î‡∏ò‡∏∏‡∏£‡∏∞ (‡πÅ‡∏î‡∏á)</strong><br/>
                                        ‡∏Ñ‡∏•‡∏¥‡∏Å 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á = <strong>‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤</strong>
                                    </div>
                                </div>
                                <div className="grid grid-cols-7 gap-1 text-center font-black text-[11px] text-slate-300 uppercase tracking-[0.2em] mb-2">
                                    {['‡∏≠‡∏≤','‡∏à','‡∏≠','‡∏û','‡∏û‡∏§','‡∏®','‡∏™'].map(d => <div key={d} className="py-2">{d}</div>)}
                                </div>
                                <div className="grid grid-cols-7 gap-3">
                                    {Array(viewMonth.getDay()).fill(null).map((_, i) => <div key={`empty-${i}`}/>)}
                                    {daysInMonth.map(date => {
                                        const dStr = date.toISOString().split('T')[0];
                                        const user = data.availabilities.find(a => a.name === userName);
                                        const status = (user?.available || []).includes(dStr) ? 'avail' : (user?.busy || []).includes(dStr) ? 'busy' : 'none';
                                        return (
                                            <button key={dStr} onClick={() => toggleDateStatus(dStr)} className={`aspect-square rounded-2xl border-2 flex items-center justify-center font-black text-base transition-all transform active:scale-90 ${status === 'avail' ? 'bg-blue-600 border-blue-600 text-white shadow-xl shadow-blue-100' : status === 'busy' ? 'bg-red-500 border-red-500 text-white shadow-xl shadow-red-100' : 'bg-white border-slate-100 hover:border-blue-200 text-slate-400'}`}>
                                                {date.getDate()}
                                            </button>
                                        );
                                    })}
                                </div>
                                <div className="pt-8 border-t">
                                    <button onClick={() => syncToCloud(data, true)} disabled={isSaving} className="w-full bg-green-600 hover:bg-green-700 text-white font-black py-5 rounded-3xl flex items-center justify-center gap-3 shadow-2xl shadow-green-200 transition-all active:scale-95 disabled:opacity-50 text-lg">
                                        {isSaving ? <div className="w-6 h-6 border-4 border-white/30 border-t-white rounded-full animate-spin"></div> : <><Check size={24} strokeWidth={3}/> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏á</>}
                                    </button>
                                </div>
                            </div>
                        )}

                        {activeTab === 'vote' && (
                            <div className="space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500">
                                <div className="bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-8">
                                    <h2 className="font-black text-2xl flex items-center gap-3 text-slate-800 tracking-tight"><Users className="text-blue-600" size={28}/> ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö</h2>
                                    <div className="space-y-8">
                                        <div>
                                            <h3 className="text-xs font-black text-slate-400 mb-4 uppercase tracking-[0.2em]">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠)</h3>
                                            <div className="grid grid-cols-2 gap-3">
                                                {['‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°', '‡∏Å‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏ô‡∏ó‡πå', 'Pool Villa', '‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå', '‡∏£‡∏µ‡∏™‡∏≠‡∏£‡πå‡∏ó'].map(opt => (
                                                    <button key={opt} onClick={() => handleVotePreference('accommodation', opt)} className={`p-5 rounded-[1.5rem] border-2 text-sm font-black text-left transition-all ${data.preferences?.accommodationVotes?.[opt]?.includes(userName) ? 'bg-blue-600 border-blue-600 text-white shadow-xl shadow-blue-100' : 'bg-slate-50 border-slate-100 hover:bg-slate-100'}`}>{opt}</button>
                                                ))}
                                            </div>
                                        </div>
                                        <div>
                                            <h3 className="text-xs font-black text-slate-400 mb-4 uppercase tracking-[0.2em]">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏£‡∏¥‡∏õ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠)</h3>
                                            <div className="grid grid-cols-2 gap-3">
                                                {["1 ‡∏ß‡∏±‡∏ô", "2 ‡∏ß‡∏±‡∏ô 1 ‡∏Ñ‡∏∑‡∏ô", "3 ‡∏ß‡∏±‡∏ô 2 ‡∏Ñ‡∏∑‡∏ô", "4 ‡∏ß‡∏±‡∏ô 3 ‡∏Ñ‡∏∑‡∏ô"].map(opt => (
                                                    <button key={opt} onClick={() => handleVotePreference('duration', opt)} className={`p-5 rounded-[1.5rem] border-2 text-sm font-black text-left transition-all ${data.preferences?.durationVotes?.[opt]?.includes(userName) ? 'bg-blue-600 border-blue-600 text-white shadow-xl shadow-blue-100' : 'bg-slate-50 border-slate-100 hover:bg-slate-100'}`}>{opt}</button>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div className="bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-8">
                                    <h2 className="font-black text-2xl flex items-center gap-3 text-slate-800 tracking-tight"><Palmtree className="text-green-500" size={28}/> ‡πÄ‡∏™‡∏ô‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß & ‡πÇ‡∏´‡∏ß‡∏ï</h2>
                                    <div className="flex gap-3">
                                        <input type="text" className="flex-1 bg-slate-50 border-2 border-slate-100 rounded-2xl px-6 py-5 outline-none focus:border-blue-500 transition-all font-bold shadow-inner" placeholder="‡πÄ‡∏™‡∏ô‡∏≠‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î..." value={newLocationName} onChange={e => setNewLocationName(e.target.value)} />
                                        <button onClick={() => { if(!newLocationName) return; const newData={...data, destinations:[...data.destinations, {id:Date.now(), name:newLocationName, votes:[userName]}]}; setData(newData); setNewLocationName(''); }} className="bg-blue-600 text-white p-5 rounded-2xl shadow-xl hover:bg-blue-700 active:scale-90 transition-all"><Plus size={24} strokeWidth={3}/></button>
                                    </div>
                                    <div className="grid grid-cols-1 gap-4">
                                        {data.destinations.map(dest => (
                                            <div key={dest.id} className="flex items-center justify-between p-6 bg-slate-50 rounded-3xl border-2 border-white shadow-sm font-black hover:shadow-md transition-all group">
                                                <span className="text-slate-700 text-lg">{dest.name}</span>
                                                <button onClick={() => { const newData={...data}; newData.destinations = newData.destinations.map(d => d.id === dest.id ? {...d, votes: (Array.isArray(d.votes) ? d.votes : []).includes(userName) ? d.votes.filter(u=>u!==userName) : [...(Array.isArray(d.votes) ? d.votes : []), userName]} : d); setData(newData); }} className={`p-4 rounded-2xl transition-all ${ (Array.isArray(dest.votes) ? dest.votes : []).includes(userName) ? 'bg-blue-600 text-white shadow-xl scale-110' : 'bg-white text-slate-300 border border-slate-100' }`}><ThumbsUp size={24}/></button>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                <button onClick={() => syncToCloud(data, true)} disabled={isSaving} className="w-full bg-gradient-to-r from-green-600 to-emerald-500 text-white font-black py-6 rounded-[2rem] shadow-2xl shadow-green-200 transform active:scale-95 transition-all text-xl">
                                    {isSaving ? "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•..." : "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ü•Ç"}
                                </button>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
